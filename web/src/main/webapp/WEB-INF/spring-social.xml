<beans:beans xmlns="http://www.springframework.org/schema/beans" xmlns:sec="http://www.springframework.org/schema/security" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oauth="http://www.springframework.org/schema/security/oauth2" xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans.xsd
	http://www.springframework.org/schema/security
	http://www.springframework.org/schema/security/spring-security.xsd
    http://www.springframework.org/schema/security/oauth2
    http://www.springframework.org/schema/security/spring-security-oauth2-1.0.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd">

    <bean class="cz.admin24.myachievo.web.security.SpringSecuritySignInAdapter" />
    <bean id="autoSignUpService" class="cz.admin24.myachievo.web.security.AutoSignUpService" />

    <bean class="org.springframework.social.connect.web.ProviderSignInController">
    <!-- relies on by-type autowiring for the constructor-args -->
        <property name="signInUrl" value="/prihlaseniSeNepovedlo_obycURL" />
    </bean>


    <bean id="connectionRepository" factory-method="createConnectionRepository" factory-bean="usersConnectionRepository" scope="request">
        <constructor-arg value="#{request.userPrincipal.name}" />
        <aop:scoped-proxy proxy-target-class="false" />
    </bean>


    <bean id="usersConnectionRepository" class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="dataSource" />
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
        <beans:property name="connectionSignUp" ref="autoSignUpService" />
    </bean>


    <bean id="connectionFactoryLocator" class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
        <property name="connectionFactories">
            <list>
<!--                 <bean class="org.springframework.social.twitter.connect.TwitterConnectionFactory"> -->
<!--                     <constructor-arg value="$_{twitter.consumerKey}" /> -->
<!--                     <constructor-arg value="$_{twitter.consumerSecret}" /> -->
<!--                 </bean> -->
                <bean class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
                    <constructor-arg value="${com.facebook.clientId}" />
                    <constructor-arg value="${com.facebook.clientSecret}" />
                </bean>
                <bean class="org.springframework.social.google.connect.GoogleConnectionFactory">
                    <constructor-arg value="${com.google.clientId}" />
                    <constructor-arg value="${com.google.clientSecret}" />
                </bean>
            </list>
        </property>
    </bean>

    <beans>
        <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors" factory-method="noOpText" />
    </beans>

<!--     <beans profile="prod"> -->
<!--         <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors" factory-method="text"> -->
<!--             <constructor-arg value="${security.encryptPassword}" /> -->
<!--             <constructor-arg value="${security.encryptSalt}" /> -->
<!--         </bean> -->



</beans:beans>